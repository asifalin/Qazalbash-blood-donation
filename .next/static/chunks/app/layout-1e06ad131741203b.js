(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{7416:(o,e,t)=>{"use strict";t.d(e,{Providers:()=>i});var a=t(91215),r=t(1383),d=t(33150),n=t(37742);let l=(0,r.U1)({reducer:{auth:d.Ay,donors:n.Ay}});var s=t(26712);function i(o){let{children:e}=o;return(0,a.jsx)(s.Kq,{store:l,children:e})}},27013:(o,e,t)=>{Promise.resolve().then(t.t.bind(t,85870,23)),Promise.resolve().then(t.t.bind(t,35758,23)),Promise.resolve().then(t.bind(t,7416))},33150:(o,e,t)=>{"use strict";t.d(e,{Ay:()=>s,iD:()=>n,ri:()=>l});var a=t(1383);let r=(()=>{{let o=localStorage.getItem("authState");if(o)return JSON.parse(o)}return{isAuthenticated:!1,user:null}})(),d=(0,a.Z0)({name:"auth",initialState:r,reducers:{login:(o,e)=>{o.isAuthenticated=!0,o.user={email:e.payload.email},localStorage.setItem("authState",JSON.stringify(o)),document.cookie="auth=true; path=/; max-age=31536000"},logout:o=>{localStorage.removeItem("authState"),document.cookie="auth=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",o.isAuthenticated=!1,o.user=null}}}),{login:n,logout:l}=d.actions,s=d.reducer},35758:()=>{},37742:(o,e,t)=>{"use strict";t.d(e,{I9:()=>n,Ay:()=>g,EK:()=>s,Ys:()=>d,dr:()=>m,_F:()=>f,cT:()=>l});var a=t(1383);let r=(0,t(64324).UU)("https://bfkpuxsppgdsvbuwknog.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJma3B1eHNwcGdkc3ZidXdrbm9nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ1NTk4NDEsImV4cCI6MjA3MDEzNTg0MX0.TI6RTlh56UHW-j5WGMuALvJe7P86SqW3VXMFkhBc4Uc"),d=(0,a.zD)("donors/fetchDonors",async()=>{let{data:o,error:e}=await r.from("donors").select("*");if(e)throw e;return o&&0!==o.length?o.map(o=>({id:o.id,fullName:o.fullname,fatherName:o.fathername,totalBloodDonate:o.totalblooddonate,bloodGroup:o.bloodgroup,age:o.age,city:o.city,lastDonationDate:o.lastdonationdate,address:o.address,contactNumber:o.contactnumber,donationStatus:o.donationstatus})):[]}),n=(0,a.zD)("donors/addDonor",async o=>{let e={fullname:o.fullName,fathername:o.fatherName,totalblooddonate:o.totalBloodDonate,bloodgroup:o.bloodGroup,age:o.age,city:o.city,address:o.address,contactnumber:o.contactNumber,lastdonationdate:o.lastDonationDate,donationstatus:o.donationStatus,createdat:new Date().toISOString(),updatedat:new Date().toISOString()},{data:t,error:a}=await r.from("donors").insert([e]).select();if(a)throw a;if(!t||0===t.length)throw Error("No donor inserted");let d=t[0];return{id:d.id,fullName:d.fullname,fatherName:d.fathername,totalBloodDonate:d.totalblooddonate,bloodGroup:d.bloodgroup,age:d.age,city:d.city,lastDonationDate:d.lastdonationdate,address:d.address,contactNumber:d.contactnumber,donationStatus:d.donationstatus}}),l=(0,a.zD)("donors/updateDonor",async o=>{let e={fullname:o.fullName,fathername:o.fatherName,totalblooddonate:o.totalBloodDonate,bloodgroup:o.bloodGroup,age:o.age,city:o.city,address:o.address,contactnumber:o.contactNumber,lastdonationdate:o.lastDonationDate,donationstatus:o.donationStatus,updatedat:new Date().toISOString()},{data:t,error:a}=await r.from("donors").update(e).eq("id",o.id).select();if(a)throw a;if(!t||0===t.length)throw Error("Donor not updated");let d=t[0];return{id:d.id,fullName:d.fullname,fatherName:d.fathername,totalBloodDonate:d.totalblooddonate,bloodGroup:d.bloodgroup,age:d.age,city:d.city,lastDonationDate:d.lastdonationdate,address:d.address,contactNumber:d.contactnumber,donationStatus:d.donationstatus}}),s=(0,a.zD)("donors/deleteDonor",async o=>{let{error:e}=await r.from("donors").delete().eq("id",o);if(e)throw e;return o}),i={donors:[],filteredDonors:[],filters:{name:"",fatherName:"",totalBloodDonate:"",bloodGroup:"",city:"",donationStatus:""},loading:!1,error:null},u=(o,e)=>o.filter(o=>{let t=!e.name||o.fullName.toLowerCase().includes(e.name.toLowerCase()),a=!e.fatherName||o.fatherName.toLowerCase().includes(e.fatherName.toLowerCase()),r=!e.totalBloodDonate||o.totalBloodDonate==e.totalBloodDonate,d=!e.bloodGroup||"All Blood Groups"===e.bloodGroup||o.bloodGroup===e.bloodGroup,n=!e.city||"Select city"===e.city||o.city===e.city,l=!e.donationStatus||"All Donors"===e.donationStatus||o.donationStatus===e.donationStatus;return t&&a&&r&&d&&n&&l}),c=(0,a.Z0)({name:"donors",initialState:i,reducers:{setFilters:(o,e)=>{o.filters={...o.filters,...e.payload},o.filteredDonors=u(o.donors,o.filters)},resetFilters:o=>{o.filters=i.filters,o.filteredDonors=o.donors},clearError:o=>{o.error=null}},extraReducers:o=>{o.addCase(d.pending,o=>{o.loading=!0}).addCase(d.fulfilled,(o,e)=>{o.loading=!1,o.donors=e.payload,o.filteredDonors=e.payload}).addCase(d.rejected,(o,e)=>{o.loading=!1,o.error=e.error.message||"Failed to fetch donors"}).addCase(n.pending,o=>{o.loading=!0}).addCase(n.fulfilled,(o,e)=>{o.donors.some(o=>o.id===e.payload.id)||o.donors.push(e.payload),o.filteredDonors=u(o.donors,o.filters),o.loading=!1}).addCase(n.rejected,(o,e)=>{o.loading=!1,o.error=e.error.message||"Failed to add donor"}).addCase(l.pending,o=>{o.loading=!0}).addCase(l.fulfilled,(o,e)=>{let t=o.donors.findIndex(o=>o.id===e.payload.id);-1!==t&&(o.donors[t]=e.payload,o.filteredDonors=u(o.donors,o.filters)),o.loading=!1}).addCase(l.rejected,(o,e)=>{o.loading=!1,o.error=e.error.message||"Failed to update donor"}).addCase(s.pending,o=>{o.loading=!0}).addCase(s.fulfilled,(o,e)=>{o.donors=o.donors.filter(o=>o.id!==e.payload),o.filteredDonors=u(o.donors,o.filters),o.loading=!1}).addCase(s.rejected,(o,e)=>{o.loading=!1,o.error=e.error.message||"Failed to delete donor"})}}),{setFilters:f,resetFilters:m,clearError:p}=c.actions,g=c.reducer},78082:o=>{function e(o){var e=Error("Cannot find module '"+o+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=78082,o.exports=e},85870:o=>{o.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}}},o=>{var e=e=>o(o.s=e);o.O(0,[977,610,324,403,255,358],()=>e(27013)),_N_E=o.O()}]);